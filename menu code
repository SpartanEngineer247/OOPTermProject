//
//  main.cpp
//  term project
//
//  Created by Raushan Khullar on 3/11/20.
//  Copyright © 2020 Raushan Khullar. All rights reserved.
//
//
//  main.cpp
//  Project
//
//  Created by Raushan Khullar on 2/22/20.
//  Copyright © 2020 Raushan Khullar. All rights reserved.
//
#include"Timer.h"
#include <chrono>
#include <thread>
#include <functional>
#include <mutex>
#include <condition_variable>
//
//  main.cpp
//  Project
//
//  Created by Raushan Khullar on 2/22/20.
//  Copyright © 2020 Raushan Khullar. All rights reserved.
//
#include<string>
#include<vector>
#include"Users_Database.h"
using namespace std;
#include<iostream>

int main()
{ int choice=0;
    do
    {
        
        // displaying menu
        cout<<"1.Create new user"<<endl;
        cout<<"2.Login "<<endl;
        cout<<"3.Exit"<<endl;
        
    //  Users_Database::logout();
        
        int choice;
        
        cout<<"Enter 1 to create new user.\nEnter 2 to login.\nEnter 3 to exit "<<endl;
        // accepting users choice
        cin>>choice;
        
        // checking choices
        Users_Database *s1;
            s1 = Users_Database::GetInstance();
            //first time calling, will successfully create the instance
    
        string NetID; string Password;
        if (choice==1)
        {
            cout<<"enter NetID\n";
            cin>>NetID;
            cout<<" enter password\n";
            cin>>Password;
            
            s1->CreateNewUser( NetID , Password);
            //
            cout<<" Please login now\n";
            cout<<"enter NetID\n";
            cin>>NetID;
            cout<<" enter password\n";
            cin>>Password;
              if(s1->Login( NetID, Password)==true)
             {
            bool flag1=true;
            int building_num2;
            do
            {
                flag1=true;
                cout<<"1. A1"<<endl;
               // cout<<"2. A2"<<endl;
              //  cout<<"3. A5"<<endl;
              //  cout<<"4. A6"<<endl;
                cout<<"0. go back to previous page"<<endl;
                
                int building_num=0;
                cin>>building_num;
                
                //int building_num2;
                if ( building_num==0)
                    
                {
                    break;
                }
                
                
                else if ( building_num==1)
                    
                {
                    bool flag=false;
                    while(flag==false)
                    {
                    cout<<"1.A1A"<<endl;
                   // cout<<"2.A1B"<<endl;
                  //  cout<<"3.A1C"<<endl;
                    cout<<"0.previous page"<<endl;
                    cin>>building_num2;
                    if (building_num2==1)
                    {
                        flag=true;
                        cout<<"Washing machines"<<endl;
                        //  cout<<"Washing machine 1: "<<CheckWashingMachineStatus("A1A");
                      //   cout<<"Washing machine 2: "<<CheckWashingMachineStatus("A1A");
                      //   cout<<"Washing machine 3: "<<CheckWashingMachineStatus("A1A");
                     //    cout<<"Washing machine 4: "<<CheckWashingMachineStatus("A1A");
                      //   cout<<"Washing machine 5: "<<CheckWashingMachineStatus("A1A");
                        cout<<"Drying machines"<<endl;
                        //   cout<<CheckDryingMachineStatus("A1A");
                    }
                        else if(building_num2==0)
                            break;
                    else
                    {
                        flag=false;
                        cout<<"invalid input\n";
                    }
                }
                }
                else
                { flag1=false;
                    cout<<"invalid entry please try again"<<endl;
                }
                
                
            }
            while(flag1==false);
            
            
            
            
            
            
            
        }
        }
        else if (choice==2)
        {
            cout<<"enter NetID\n";
                       cin>>NetID;
                       cout<<" enter password\n";
                       cin>>Password;
             if(s1->Login( NetID,  Password)==true)
             {
            bool flag2=true;
                int building_num2;
                do
                {
                    flag2=true;
                    cout<<"1. A1"<<endl;
                 //   cout<<"2. A2"<<endl;
                  //  cout<<"3. A5"<<endl;
                  //  cout<<"4. A6"<<endl;
                    cout<<"0. go back to previous page"<<endl;
                    
                    int building_num=0;
                    cin>>building_num;
                    
                    //int building_num2;
                    if ( building_num==0)
                        
                    {
                        break;
                    }
                    else if ( building_num==1)
                        
                    {
                        bool flag=false;
                        while(flag==false)
                        {
                        cout<<"1.A1A"<<endl;
                       // cout<<"2.A1B"<<endl;
                      //  cout<<"3.A1C"<<endl;
                        cout<<"0.previous page"<<endl;
                        cin>>building_num2;
                        if (building_num2==1)
                        {
                            flag=true;
                            cout<<"Washing machines"<<endl;
                            //  cout<<CheckWashingMachineStatus("A1A");
                            cout<<"Drying machines"<<endl;
                            //   cout<<CheckDryingMachineStatus("A1A");
                        }
                            else if (building_num2==0)
                                break;
                            else
                            {
                                flag=false;
                                cout<<"invalid input please try again\n";
                            }
                    }
                    }
                    else
                    { flag2=false;
                        cout<<"invalid entry please try again"<<endl;
                    }
                    
                    
                }
                while(flag2==false);
            }
        }
                
        
            
        
         
        
        else if (choice==3)
        {
            delete s1;
            exit(0);
        }
        
        else
        {
            
            cout<<"invalid input, please try again"<<endl;
            continue;
        }
        
    }
    
    while(choice!=3);
}



